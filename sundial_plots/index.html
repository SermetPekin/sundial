
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../equation_of_time/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Analemma Plots - The Analemma Package</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#analemma-plots" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="The Analemma Package" class="md-header__button md-logo" aria-label="The Analemma Package" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The Analemma Package
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Analemma Plots
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="The Analemma Package" class="md-nav__button md-logo" aria-label="The Analemma Package" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    The Analemma Package
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Analemma Plots
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Analemma Plots
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sunrise-and-sunset" class="md-nav__link">
    <span class="md-ellipsis">
      Sunrise and Sunset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-solstices" class="md-nav__link">
    <span class="md-ellipsis">
      The Solstices
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#daytime" class="md-nav__link">
    <span class="md-ellipsis">
      Daytime
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analemmas" class="md-nav__link">
    <span class="md-ellipsis">
      Analemmas
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../equation_of_time/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Equation of Time
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sundial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sundial Calculations
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api_reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sunrise-and-sunset" class="md-nav__link">
    <span class="md-ellipsis">
      Sunrise and Sunset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-solstices" class="md-nav__link">
    <span class="md-ellipsis">
      The Solstices
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#daytime" class="md-nav__link">
    <span class="md-ellipsis">
      Daytime
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analemmas" class="md-nav__link">
    <span class="md-ellipsis">
      Analemmas
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="analemma-plots">Analemma Plots</h1>
<p>This notebook uses the results from <a href="../sundial/">Sundial Calculations</a> as encoded in the <a href="../">analemma package</a> to visualize various properties of sundials, in particular analemmas.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">analemma</span> <span class="kn">import</span> <span class="n">orbit</span><span class="p">,</span> <span class="n">plot</span> <span class="k">as</span> <span class="n">aplot</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">pi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>
<span class="n">earth</span> <span class="o">=</span> <span class="n">orbit</span><span class="o">.</span><span class="n">PlanetParameters</span><span class="o">.</span><span class="n">earth</span><span class="p">()</span>
<span class="n">camdial</span> <span class="o">=</span> <span class="n">aplot</span><span class="o">.</span><span class="n">DialParameters</span><span class="p">(</span><span class="n">theta</span><span class="o">=</span><span class="mf">37.5</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span> <span class="n">iota</span><span class="o">=</span><span class="mf">37.5</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># Analemmatic dial in Cambridge, UK</span>
</code></pre></div>
<h2 id="sunrise-and-sunset">Sunrise and Sunset</h2>
<p>We will need to know the range of time within each day to plot the path of the tip of the shadow as the sun moves through the sky. This is determined by the angle between the sun ray and the face of the dial. When the sun ray and dial face are parallel, we have an effective sunrise or sunset relative to the dial. When the sun ray is closest to perpendicular to the dial face, we have an effective noon relative to the dial. For some dials on some days, such points do not exist and there is either a shadow throughout the entire day or the lack thereof.</p>
<div class="highlight"><pre><span></span><code><span class="n">days_since_perihelion</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">st</span> <span class="o">=</span> <span class="n">aplot</span><span class="o">.</span><span class="n">find_sun_rise_noon_set_relative_to_dial_face</span><span class="p">(</span><span class="n">days_since_perihelion</span><span class="p">,</span> <span class="n">earth</span><span class="p">,</span> <span class="n">camdial</span><span class="p">)</span>

<span class="n">times</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">sample_times_for_one_day</span><span class="p">()</span>
<span class="n">abs_seconds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">st</span><span class="o">.</span><span class="n">absolute_seconds</span> <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="n">times</span><span class="p">])</span>
<span class="n">sines</span> <span class="o">=</span> <span class="n">aplot</span><span class="o">.</span><span class="n">sin_sunray_dialface_angle</span><span class="p">(</span><span class="n">abs_seconds</span><span class="p">,</span> <span class="n">earth</span><span class="p">,</span> <span class="n">camdial</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">st</span><span class="o">.</span><span class="n">hours_from_midnight</span> <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="n">times</span><span class="p">],</span> <span class="n">sines</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">sunrise</span><span class="o">.</span><span class="n">hours_from_midnight</span><span class="p">,</span> <span class="n">aplot</span><span class="o">.</span><span class="n">sin_sunray_dialface_angle</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">sunrise</span><span class="o">.</span><span class="n">absolute_seconds</span><span class="p">,</span> <span class="n">earth</span><span class="p">,</span> <span class="n">camdial</span><span class="p">),</span> <span class="s1">&#39;sr&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Sunrise&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">noon</span><span class="o">.</span><span class="n">hours_from_midnight</span><span class="p">,</span>    <span class="n">aplot</span><span class="o">.</span><span class="n">sin_sunray_dialface_angle</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">noon</span><span class="o">.</span><span class="n">absolute_seconds</span><span class="p">,</span> <span class="n">earth</span><span class="p">,</span> <span class="n">camdial</span><span class="p">),</span> <span class="s1">&#39;og&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Noon&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">sunset</span><span class="o">.</span><span class="n">hours_from_midnight</span><span class="p">,</span>  <span class="n">aplot</span><span class="o">.</span><span class="n">sin_sunray_dialface_angle</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">sunset</span><span class="o">.</span><span class="n">absolute_seconds</span><span class="p">,</span> <span class="n">earth</span><span class="p">,</span> <span class="n">camdial</span><span class="p">),</span> <span class="s1">&#39;Db&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Sunset&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Time in hours since midnight&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Sine of sunray-dialface angle&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Key sundial events on </span><span class="si">{</span><span class="n">aplot</span><span class="o">.</span><span class="n">orbit_day_to_date</span><span class="p">(</span><span class="n">days_since_perihelion</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;matplotlib.legend.Legend at 0x1337f2c70&gt;
</code></pre></div>
<p><img alt="png" src="../sundial_plots_files/sundial_plots_3_1.png" /></p>
<h2 id="the-solstices">The Solstices</h2>
<p>The June and December solstices should occur on the longest and shortest day of the year for the given dial.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>

<span class="n">sun_times</span> <span class="o">=</span> <span class="p">[</span><span class="n">aplot</span><span class="o">.</span><span class="n">find_sun_rise_noon_set_relative_to_dial_face</span><span class="p">(</span><span class="n">days_since_perihelion</span><span class="p">,</span> <span class="n">earth</span><span class="p">,</span> <span class="n">camdial</span><span class="p">)</span> <span class="k">for</span> <span class="n">days_since_perihelion</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">365</span><span class="p">)]</span>

<span class="n">day_lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">st</span><span class="o">.</span><span class="n">sunset</span><span class="o">.</span><span class="n">hours_from_midnight</span> <span class="o">-</span> <span class="n">st</span><span class="o">.</span><span class="n">sunrise</span><span class="o">.</span><span class="n">hours_from_midnight</span> <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="n">sun_times</span><span class="p">]</span>
<span class="n">december_solstice</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">day_lengths</span><span class="p">)</span>
<span class="n">june_solstice</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">day_lengths</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">aplot</span><span class="o">.</span><span class="n">orbit_day_to_date</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="s2">&quot;2024-01-03&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">aplot</span><span class="o">.</span><span class="n">orbit_day_to_date</span><span class="p">(</span><span class="n">june_solstice</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="s2">&quot;2024-06-21&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">aplot</span><span class="o">.</span><span class="n">orbit_day_to_date</span><span class="p">(</span><span class="n">december_solstice</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="s2">&quot;2024-12-21&quot;</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">aplot</span><span class="o">.</span><span class="n">orbit_date_to_day</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="s2">&quot;2024-01-03&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span>
<span class="k">assert</span> <span class="n">aplot</span><span class="o">.</span><span class="n">orbit_date_to_day</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="s2">&quot;2024-06-21&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="n">june_solstice</span>
<span class="k">assert</span> <span class="n">aplot</span><span class="o">.</span><span class="n">orbit_date_to_day</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="s2">&quot;2024-12-21&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="n">december_solstice</span>

<span class="n">arbitrary_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="s2">&quot;2024-05-26&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">aplot</span><span class="o">.</span><span class="n">orbit_day_to_date</span><span class="p">(</span><span class="n">aplot</span><span class="o">.</span><span class="n">orbit_date_to_day</span><span class="p">(</span><span class="n">arbitrary_date</span><span class="p">))</span> <span class="o">==</span> <span class="n">arbitrary_date</span>
</code></pre></div>
<h2 id="daytime">Daytime</h2>
<p>An effective daytime relative to the dial exists when the sine of the sunray-dialface angle is positive.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">_plot_sunray_dialface_angle</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">begin_hour</span><span class="p">,</span> <span class="n">end_hour</span><span class="p">,</span> <span class="n">planet</span> <span class="p">:</span> <span class="n">orbit</span><span class="o">.</span><span class="n">PlanetParameters</span><span class="p">,</span> <span class="n">dial</span> <span class="p">:</span> <span class="n">aplot</span><span class="o">.</span><span class="n">DialParameters</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">hour_offset</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">begin_hour</span><span class="p">,</span> <span class="n">end_hour</span><span class="p">):</span>
        <span class="n">times</span><span class="p">,</span> <span class="n">sines</span> <span class="o">=</span> <span class="n">aplot</span><span class="o">.</span><span class="n">sunray_dialface_angle_over_one_year</span><span class="p">(</span><span class="n">planet</span><span class="p">,</span> <span class="n">dial</span><span class="p">,</span> <span class="n">hour_offset</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">times</span><span class="o">/</span><span class="mi">3600</span><span class="o">/</span><span class="mi">24</span><span class="p">,</span> <span class="n">sines</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">aplot</span><span class="o">.</span><span class="n">hour_offset_to_oclock</span><span class="p">(</span><span class="n">hour_offset</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Days since perihelion&quot;</span><span class="p">)</span>


<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">_plot_sunray_dialface_angle</span><span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">earth</span><span class="p">,</span> <span class="n">camdial</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Sine of sunray-dialface angle&quot;</span><span class="p">)</span>
<span class="n">_plot_sunray_dialface_angle</span><span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">earth</span><span class="p">,</span> <span class="n">camdial</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Daytime throughout the year&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Text(0.5, 0.98, &#39;Daytime throughout the year&#39;)
</code></pre></div>
<p><img alt="png" src="../sundial_plots_files/sundial_plots_7_1.png" /></p>
<h2 id="analemmas">Analemmas</h2>
<p>The analemma is the path traced by the sun in the sky, or the shadow on a sundial, throughout one year when viewed at the same time each day, and typically has a figure-of-eight shape, because of the <a href="../equation_of_time/">equation of time</a>.</p>
<p>In the plots below we show several analemmas, one per hour of daytime. The line style shows the season. One line showing the path of the shadow tip during the day for each solstice is also shown (with line style appropriate to the season) and forms an envelope marking the longest shadows in Winter and the shortest shadows in Summer. Similarly, the path of the shadow tip on each equinox is shown and appears as a straight line. Moreover, the two straight lines fall on top of each other.</p>
<p>A black circle marks the base of the gnomon, which has unit length.</p>
<div class="highlight"><pre><span></span><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>

<span class="n">hour_offsets</span> <span class="o">=</span> <span class="n">aplot</span><span class="o">.</span><span class="n">find_daytime_offsets</span><span class="p">(</span><span class="n">earth</span><span class="p">,</span> <span class="n">camdial</span><span class="p">)</span>

<span class="n">lines_for_legend</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">season</span> <span class="ow">in</span> <span class="n">aplot</span><span class="o">.</span><span class="n">Season</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">hour</span> <span class="ow">in</span> <span class="n">hour_offsets</span><span class="p">:</span>
        <span class="n">aplot</span><span class="o">.</span><span class="n">plot_analemma_season_segment</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">earth</span><span class="p">,</span> <span class="n">camdial</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
        <span class="n">aplot</span><span class="o">.</span><span class="n">annotate_analemma_with_hour</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">earth</span><span class="p">,</span> <span class="n">camdial</span><span class="p">)</span>
    <span class="n">lines_for_legend</span> <span class="o">+=</span> <span class="n">aplot</span><span class="o">.</span><span class="n">plot_special_sun_path</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">season</span><span class="p">,</span> <span class="n">earth</span><span class="p">,</span> <span class="n">camdial</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>

<span class="c1"># put a circle at the base of the gnomon</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ok&#39;</span> <span class="p">)</span>

<span class="n">ordered_lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">lines_for_legend</span><span class="p">[</span><span class="n">season</span><span class="o">.</span><span class="n">value</span><span class="p">]</span> <span class="k">for</span> <span class="n">season</span> <span class="ow">in</span> <span class="p">[</span><span class="n">aplot</span><span class="o">.</span><span class="n">Season</span><span class="o">.</span><span class="n">Spring</span><span class="p">,</span> <span class="n">aplot</span><span class="o">.</span><span class="n">Season</span><span class="o">.</span><span class="n">Summer</span><span class="p">,</span> <span class="n">aplot</span><span class="o">.</span><span class="n">Season</span><span class="o">.</span><span class="n">Autumn</span><span class="p">,</span> <span class="n">aplot</span><span class="o">.</span><span class="n">Season</span><span class="o">.</span><span class="n">Winter</span><span class="p">]]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="n">ordered_lines</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Analemmatic sundial in Cambridge, UK&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Text(0.5, 1.0, &#39;Analemmatic sundial in Cambridge, UK&#39;)
</code></pre></div>
<p><img alt="png" src="../sundial_plots_files/sundial_plots_9_1.png" /></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.56dfad97.min.js"></script>
      
        <script src="../javascripts/katex.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>